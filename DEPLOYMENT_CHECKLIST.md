# Deployment Checklist for GitHub to Render

## Pre-Deployment Steps

### 1. Code Preparation âœ…
- [x] All necessary files are in the backend directory
- [x] `.gitignore` file created to exclude sensitive files
- [x] `requirements.txt` updated with all dependencies
- [x] `render.yaml` configuration file created
- [x] `build.sh` script created for deployment
- [x] Health check endpoint added
- [x] Production settings configured

### 2. Environment Variables
Before pushing to GitHub, ensure you have these environment variables ready for Render:

**Required Variables:**
- `SECRET_KEY`: Will be auto-generated by Render
- `DEBUG`: Set to `False`
- `IS_PRODUCTION`: Set to `True`
- `ALLOWED_HOSTS`: Your Render domain (e.g., `kidai-backend.onrender.com`)
- `CORS_ALLOWED_ORIGINS`: Your Vercel frontend URL (e.g., `https://your-app.vercel.app`)

**Optional Variables:**
- `DATABASE_URL`: PostgreSQL connection string (if using PostgreSQL)

### 3. GitHub Repository Setup
1. Create a new GitHub repository
2. Push the backend code to the repository
3. Ensure the repository is public or Render has access

## Render Deployment Steps

### 1. Connect to Render
1. Go to [render.com](https://render.com)
2. Sign up/Login with your GitHub account
3. Click "New +" and select "Web Service"
4. Connect your GitHub repository

### 2. Configure the Service
1. **Name**: `kidai-backend` (or your preferred name)
2. **Environment**: `Python 3`
3. **Region**: Choose closest to your users
4. **Branch**: `main` (or your default branch)
5. **Root Directory**: `backend` (if your backend is in a subdirectory)
6. **Build Command**: `chmod +x build.sh && ./build.sh`
7. **Start Command**: `gunicorn kidai_backend.wsgi:application --bind 0.0.0.0:$PORT`

### 3. Environment Variables
Add these environment variables in Render:

```bash
SECRET_KEY=your-secure-secret-key-here
DEBUG=False
IS_PRODUCTION=True
ALLOWED_HOSTS=kidai-backend.onrender.com
CORS_ALLOWED_ORIGINS=https://your-vercel-app.vercel.app
DATABASE_URL=sqlite:///db.sqlite3
```

### 4. Deploy
1. Click "Create Web Service"
2. Render will automatically build and deploy your application
3. Monitor the build logs for any issues

## Post-Deployment Steps

### 1. Test the Deployment
1. Check the health endpoint: `https://your-app.onrender.com/health/`
2. Test the API endpoints:
   - `POST https://your-app.onrender.com/api/register/`
   - `POST https://your-app.onrender.com/api/login/`

### 2. Update Frontend Configuration
1. Go to your Vercel project settings
2. Add environment variable:
   - `NEXT_PUBLIC_BACKEND_URL`: `https://your-app.onrender.com`

### 3. Database Setup (Optional)
If you want to use PostgreSQL:
1. Create a PostgreSQL database service on Render
2. Update the `DATABASE_URL` environment variable
3. Redeploy the application

## Troubleshooting

### Common Issues:
1. **Build fails**: Check the build logs in Render
2. **Import errors**: Ensure all packages are in `requirements.txt`
3. **CORS errors**: Verify `CORS_ALLOWED_ORIGINS` includes your frontend URL
4. **Database errors**: Check database configuration and migrations

### Debug Mode:
For debugging, temporarily set `DEBUG=True` and check the logs in Render.

## Security Notes

- Never commit `.env` files to GitHub
- Use strong secret keys in production
- Keep `DEBUG=False` in production
- Regularly update dependencies
- Monitor application logs for issues

## Next Steps

After successful deployment:
1. Test all API endpoints
2. Update frontend to use the new backend URL
3. Deploy frontend to Vercel
4. Test the complete application flow
5. Set up monitoring and logging if needed 